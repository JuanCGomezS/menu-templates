---
import RestaurantHeader from "./RestaurantHeader.astro";
import ContactInfo from "./ContactInfo.astro";
import Schedule from "./Schedule.astro";
import CategorySection from "./CategorySection.astro";

interface Props {
  restaurant: {
    id: string;
    name: string;
    slug: string;
    isActive: boolean;
    currency: string;
    template?: { name: string } | null;
    contact?: {
      whatsapp?: string;
      instagram?: string;
      address?: string;
    };
    schedule?: Record<string, string>;
    categories: Array<{
      id: string;
      name: string;
      items: Array<{
        name: string;
        description?: string;
        price: number;
      }>;
    }>;
  };
}

const { restaurant } = Astro.props;
---

<article class="mb-16 bg-white rounded-xl shadow-lg overflow-hidden border border-gray-200">
  <div class="bg-gradient-to-r from-orange-500 to-pink-500 p-6">
    <RestaurantHeader
      name={restaurant.name}
      slug={restaurant.slug}
      isActive={restaurant.isActive}
      currency={restaurant.currency}
      template={restaurant.template}
    />
  </div>

  <div class="p-6 space-y-6">
    {restaurant.contact && (
      <div class="border-b border-gray-200 pb-6">
        <ContactInfo contact={restaurant.contact} />
      </div>
    )}

    {restaurant.schedule && (
      <div class="border-b border-gray-200 pb-6">
        <Schedule schedule={restaurant.schedule} />
      </div>
    )}

    {
      restaurant.categories && restaurant.categories.length > 0 ? (
        <div class="menu-section pt-4">
          <div class="mb-8">
            <h3 class="text-3xl font-bold text-gray-900 mb-2">Menú</h3>
            <div class="w-20 h-1 bg-gradient-to-r from-orange-500 to-pink-500 rounded-full"></div>
          </div>
          {restaurant.categories.map((category) => (
            <CategorySection category={category} currency={restaurant.currency} />
          ))}
        </div>
      ) : (
        <div class="bg-gray-50 rounded-lg p-6 text-center">
          <p class="text-gray-500 italic">No hay categorías disponibles</p>
        </div>
      )
    }
  </div>
</article>
